function addBusCancleTicket(n,t){t.preventDefault();var r=$(n).attr("data-id"),i=new BootstrapDialog({closable:!0,id:"modalBusFilterRoute",closeByBackdrop:!1,closeByKeyboard:!1,draggable:!1,title:$(n).attr("data-title"),data:{id:$(n).attr("data-ids")},onshow:function(n){n.getModalBody().html($d.append($l));n.getModalFooter().hide()},onshown:function(){setTimeout(function(){},$delay)},buttons:[{id:"btn-done",label:"DONE",cssClass:"btn btn-success btn-lg waves-effect",action:function(){i.close()}}]});i.realize();i.getModalHeader().hide();i.getModalFooter();i.open()}function addBusFilterTicket(n,t,i){t.preventDefault();$($(i)).validate({highlight:function(n){$(n).parents(".form-line").addClass("error")},unhighlight:function(n){$(n).parents(".form-line").removeClass("error")},errorPlacement:function(n,t){$(t).parents(".form-group").append(n)},submitHandler:function(n,t){return postTicketSearchByFeed($($(i)).serialize(),function(n){n===!0}),t.preventDefault(),!1},invalidHandler:function(){console.log("invalidHandler")}});$($(i)).submit()}function addPrintTicket(n,t){t.preventDefault();var i=$(n).attr("data-id");postPrintTicket(i,function(n){n===!0})}function addBusPassenger(n,t,i){t.preventDefault();var r=$(n).attr("data-id");$($(i)).validate({rules:{policy:{required:!0}},highlight:function(n){$(n).parents(".form-line").addClass("error")},unhighlight:function(n){$(n).parents(".form-line").removeClass("error")},errorPlacement:function(n,t){$(t).parents(".form-group").append(n)},submitHandler:function(n,t){return postPassengerByFeed($($(i)).serialize(),function(n){n===!0&&setTimeout(function(){window.location.href=rootHost+"payment/"+r},200)}),t.preventDefault(),!1},invalidHandler:function(){console.log("invalidHandler")}});$($(i)).submit()}function addBusTicket(){postBusTicket({})}function addPanalDeparture(n){currentPanalProvider=$(n).attr("data-provider")}function addPostDataSeat(n){var t=busDepartTotal.find(t=>t.id===n);return{id:n,boardingID:$("#form_busFilter input[name='FromProvince']").val(),dropoffID:$("#form_busFilter input[name='FromStation']").val(),travelID:t.departList[0].price.listPrice[0].travelID,totalseat:Number(t.departList[0].totalseat),busTypeCode:t.departList[0].busTypeCode,agent:"GB",seatProvider:Number(currentPanalProvider)}}function addPostDataSeatReturn(n){var t=busReturnTotal.find(t=>t.id===n);return{id:n,boardingID:$("#form_busFilter input[name='FromProvinceReturn']").val(),dropoffID:$("#form_busFilter input[name='FromStationReturn']").val(),travelID:t.departList[0].price.listPrice[0].travelID,totalseat:Number(t.departList[0].totalseat),busTypeCode:t.departList[0].busTypeCode,agent:"GB",seatProvider:Number(currentPanalProvider)}}function addBusSeat(n){var t=$(n).attr("data-number"),f=$(n).attr("data-floor"),e=$(n).attr("data-provider"),i=$(n).attr("data-id"),r=null,u;r=currentPanalProvider==1?addPostDataSeat(i):addPostDataSeatReturn(i);u={floorIndex:f,seatNumber:t,seatProvider:Number(currentPanalProvider),seatRequest:r,seatDetailRequest:{rowIndex:$(n).attr("data-rowindex"),columnIndex:$(n).attr("data-columnindex"),typeCode:$(n).attr("data-typecode"),typeName:$(n).attr("data-typename"),seatNumber:$(n).attr("data-number"),seatStatus:$(n).attr("data-seatstatus"),classCode:$(n).attr("data-classcode"),className:$(n).attr("data-classname"),passengerType:$(n).attr("data-passengertype"),gender:$(n).attr("data-gender")}};$(n).is(":checked")?postBusLockSeat(u):console.log("uncheck "+t)}function addBusReturnSeatMap(n){var u;$("#tabReturn .panel-heading").find("input").prop("checked",!1);$(n).prev("#tabReturn .panel-heading").find("input").prop("checked",!0);var t=$("#tabReturn .panel-heading input[type='radio']:checked"),f=t.attr("data-total"),e=$("#form_busFilter input[name='FromProvinceReturn']").val(),o=$("#form_busFilter input[name='FromStationReturn']").val(),s=t.attr("data-travel"),y=t.attr("data-agent"),h=t.attr("data-type"),c=$("input[type='radio'][name='radtriptype']:checked").val(),l=$("#form_busFilter select[name='DepartureTimeReturn'] option:selected").val(),a=$("#form_busFilter select[name='DepartureTime'] option:selected").val(),r=t.val(),v=busDepartTotal.find(n=>n.id===r),i=busReturnTotal.find(n=>n.id===r);i===undefined&&(i=null);u={boardingID:e,dropoffID:o,travelID:s,totalseat:Number(f),busTypeCode:h,agent:"GB",SeatProvider:Number(currentPanalProvider),busSearch:v,tripType:Number(c),busSearchReturn:i,busSearchRequest:{departureTimeReturn:l,departureTime:a,departureDate:$("#form_busFilter input[name='departureDate']").val(),departureDateReturn:$("#form_busFilter input[name='departureDateReturn']").val(),TripType:Number($("#form_busFilter input[name='TripType']").val()),ToRouteListReturn:$("#form_busFilter input[name='ToRouteListReturn']").val(),ToStationReturn:$("#form_busFilter input[name='ToStationReturn']").val(),ToProvinceReturn:$("#form_busFilter input[name='ToProvinceReturn']").val(),ToProvince:$("#form_busFilter input[name='ToProvince']").val(),ToRouteList:$("#form_busFilter input[name='ToRouteList']").val(),ToStation:$("#form_busFilter input[name='ToStation']").val(),FromProvince:$("#form_busFilter input[name='FromProvince']").val(),FromStation:$("#form_busFilter input[name='FromStation']").val(),FromProvinceReturn:$("#form_busFilter input[name='FromProvinceReturn']").val(),FromStationReturn:$("#form_busFilter input[name='FromStationReturn']").val()}};postBusSeatByFeed(u)}function addBusSeatMap(n){var e,i,r;$("#tabDeparture .panel-heading").find("input").prop("checked",!1);$(n).prev("#tabDeparture .panel-heading").find("input").prop("checked",!0);var t=$("#tabDeparture .panel-heading input[type='radio']:checked"),o=t.attr("data-total"),s=$("#form_busFilter input[name='FromProvince']").val(),h=$("#form_busFilter input[name='ToProvince']").val(),c=t.attr("data-travel"),y=t.attr("data-agent"),l=t.attr("data-type"),u=t.val(),a=$("input[type='radio'][name='radtriptype']:checked").val(),v=$("#form_busFilter select[name='DepartureTimeReturn'] option:selected").val(),f=$("#form_busFilter select[name='DepartureTime'] option:selected").val();console.log(f);e=busDepartTotal.find(n=>n.id===u);i=busReturnTotal.find(n=>n.id===u);i===undefined&&(i=null);r={boardingID:s,dropoffID:h,travelID:c,totalseat:Number(o),busTypeCode:l,agent:"GB",SeatProvider:Number(currentPanalProvider),busSearch:e,busSearchReturn:i,tripType:Number(a),busSearchRequest:{departureTimeReturn:v,departureTime:f,departureDate:$("#form_busFilter input[name='departureDate']").val(),departureDateReturn:$("#form_busFilter input[name='departureDateReturn']").val(),TripType:Number($("#form_busFilter input[name='TripType']").val()),ToRouteListReturn:$("#form_busFilter input[name='ToRouteListReturn']").val(),ToStationReturn:$("#form_busFilter input[name='ToStationReturn']").val(),ToProvinceReturn:$("#form_busFilter input[name='ToProvinceReturn']").val(),ToProvince:$("#form_busFilter input[name='ToProvince']").val(),ToRouteList:$("#form_busFilter input[name='ToRouteList']").val(),ToStation:$("#form_busFilter input[name='ToStation']").val(),FromProvince:$("#form_busFilter input[name='FromProvince']").val(),FromStation:$("#form_busFilter input[name='FromStation']").val(),FromProvinceReturn:$("#form_busFilter input[name='FromProvinceReturn']").val(),FromStationReturn:$("#form_busFilter input[name='FromStationReturn']").val()}};console.log(r);postBusSeatByFeed(r)}function addListDropOffReturn(n){var t=$("option:selected",n).attr("data-id"),i=$("option:selected",n).attr("data-route"),r=$("option:selected",n).attr("data-province"),u=$("option:selected",n).attr("data-station");$("#form_busFilter input[name='ToStationReturnName']").val(u);$("#form_busFilter input[name='ToProvinceReturnName']").val(r);$("#form_busFilter input[name='ToRouteListReturn']").val(i);$("#form_busFilter input[name='ToProvinceReturn']").val(t);$("#form_busFilter input[name='ToStationReturn']").val(n.value)}function addListDropOff(n){var t=$("option:selected",n).attr("data-id"),i=$("option:selected",n).attr("data-route"),r=$("option:selected",n).attr("data-province"),u=$("option:selected",n).attr("data-station");$("#form_busFilter input[name='ToStationName']").val(u);$("#form_busFilter input[name='ToProvinceName']").val(r);$("#form_busFilter input[name='ToRouteList']").val(i);$("#form_busFilter input[name='ToProvince']").val(t);$("#form_busFilter input[name='ToStation']").val(n.value)}function addBusFilter(n,t,i){t.preventDefault();$($(i)).validate({highlight:function(n){$(n).parents(".form-line").addClass("error")},unhighlight:function(n){$(n).parents(".form-line").removeClass("error")},errorPlacement:function(n,t){$(t).parents(".form-group").append(n)},submitHandler:function(n,t){return postBusSearchByFeed($($(i)).serialize(),function(n){n===!0}),t.preventDefault(),!1},invalidHandler:function(){console.log("invalidHandler")}});$($(i)).submit()}function addTripType(n){postBusFilter(n.value)}function addListBoardingReturn(n){var t=$("option:selected",n).attr("data-id"),i=$("option:selected",n).attr("data-province"),r=$("option:selected",n).attr("data-station");postBusListBoardingReturn(t,n.value,i,r)}function addListBoarding(n){var t=$("option:selected",n).attr("data-id"),i=$("option:selected",n).attr("data-province"),r=$("option:selected",n).attr("data-station");postBusListBoarding(t,n.value,i,r)}function activateModelBody(n,t,i){$("#validation-summary-errors").html("");$("#validation-summary-errors-modal").html("");t.getModalBody().css("padding","0").html(n);i===!1?t.getModalFooter().hide():t.getModalFooter().show();activateAdminBSB()}function activateAdminBSB(){$.AdminBSB.dropdownMenu.activate();$.AdminBSB.input.activate();$.AdminBSB.select.activate()}function setUndefined(n){return n===undefined||n==="undefined"||n===null||n===""?undefined:n}function redirect(n){var i=navigator.userAgent.toLowerCase(),r=i.indexOf("msie")!==-1,u=parseInt(i.substr(4,2),10),t;r&&u<9?(t=document.createElement("a"),t.href=n,document.body.appendChild(t),t.click()):window.location.href=n}function displayErrors(n){var i,t;for(console.log(n),i="",t=0;t<n.length;t++)i+="<li>"+n[t].Value+"<\/li>";$("#validation-summary-errors").html("<div class='validation-summary-errors alert alert-danger alert-dismissible'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>×<\/span><\/button><strong><i class='material-icons'>error<\/i> <span style='vertical-align: super;'>Oh snap!<\/span><\/strong><ul>"+i+"<\/ul><\/div>")}function toSeoUrl(n){return n.toString().normalize("NFD").replace(/\s+/g,"-").toLowerCase().replace(/,/g,"_")}function loadComponent(n){$(n).html('<div class="hr-line-x-small"><\/div><div class="preloader pl-size-l"><div class="spinner-layer pl-red-grey"><div class="circle-clipper left"><div class="circle"><\/div><\/div><div class="circle-clipper right"><div class="circle"><\/div><\/div><\/div><\/div>')}function load(){setTimeout(function(){$(".page-loader-wrapper").fadeIn()},5);$("html, body").animate({scrollTop:0},5)}function unload(){setTimeout(function(){$(".page-loader-wrapper").fadeOut()},5);$("html, body").animate({scrollTop:0},5)}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function diff(n,t){var u;n=n.split(":");t=t.split(":");var f=new Date(0,0,0,n[0],n[1],0),e=new Date(0,0,0,t[0],t[1],0),r=e.getTime()-f.getTime(),i=Math.floor(r/36e5);return r-=i*36e5,u=Math.floor(r/6e4),i<0&&(i=i+24),(i<=9?"0":"")+i+"h "+(u<=9?"0":"")+u+"m"}function find(n,t,i){var r=null;return n.some(function(u,f){return t.call(i,u,f,n)?(r=u,!0):!1}),r}function toSeoUrl(n){return n.toString().normalize("NFD").replace(/\s+/g,"-").toLowerCase().replace(/,/g,"_")}function getUrlParameter(n){for(var u=window.location.search.substring(1),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1].split("_")}function removeURLParameter(n,t){var u=n.split("?"),f,i,r;if(u.length>=2){for(f=encodeURIComponent(t)+"=",i=u[1].split(/[&;]/g),r=i.length;r-->0;)i[r].lastIndexOf(f,0)!==-1&&i.splice(r,1);return u[0]+(i.length>0?"?"+i.join("&"):"")}return n}function activateValidate(){$.validator.addMethod("emailonly",function(n){return n.match("^[^@\\s]+@([^@\\s]+\\.)+[^@\\s]+$")},"Please type in Email only.")}function modalMessage(n){var t=new BootstrapDialog({closable:!0,id:"modalMessage",closeByBackdrop:!1,closeByKeyboard:!1,draggable:!1,title:n,onshow:function(n){n.getModalBody().html("");n.getModalFooter().hide()},onshown:function(n){n.getModalBody().html("")},buttons:[{label:"CLOSE",cssClass:"btn btn-danger btn-lg waves-effect",action:function(n){n.close()}}]});t.realize();t.getModalHeader();t.getModalFooter();t.open()}function bindTemplate(n,t,i,r){var u=$(t).render(n);r?$(i).append(u):$(i).html(u);t==="#shopBusResultTemplate"&&lazyLoadImage()}function lazyLoadImage(){$(".ShopBusResultContainer img.tour").loadScroll(0);setTimeout(function(){window.scrollBy(0,10);window.scrollBy(0,-10)},500)}function postTicketSearchByFeed(n){postTicketSearchByFeedAPI(n,function(n){ticketSearchByFeed=n.data;composepostTicketSearchByFeedIfReady()})}function composepostTicketSearchByFeedIfReady(){var n,t;for(console.log(ticketSearchByFeed),n=0;n<ticketSearchByFeed.busTicketSearchResult.data.length;n++)t=ticketSearchByFeed.busTicketSearchResult.data[n],t.bookingDateFormat=moment(t.bookingDate).format("DD/MM/YYYY"),ticketSearchByFeed.busTicketSearchResult.data[n]=t;bindTemplate(ticketSearchByFeed,"#ticketSearchResultTemplate",".TicketSearchResultsContainer",!1);activateAdminBSB()}function postTicketSearchByFeedAPI(n,t){({})["XSRF-TOKEN"]=TOKENHEADERVALUE;loadComponent(".SearchResultsContainer");$.post(busTicketSearchAPI,n).done(function(n){t(n)}).fail(function(n){$(".SearchResultsContainer").html('<p class="search-message">not found.<\/p>');displayErrors(n.responseJSON);t(null)})}function postPrintTicket(n,t){postPrintTicketByFeedAPI(n,function(n){n!==null?(t(!0),composePrintTicketByFeedIfReady(n)):t(!1)})}function composePrintTicketByFeedIfReady(n){console.log(n);n.contactName=n.data.busPassengers[0].firstName+" "+n.data.busPassengers[0].lastName+" - "+n.data.busPassengers[0].telNumber;n.departure=n.data.busSearch.departList[0];n.departure.departureDate=moment(n.departure.departureDateTime).format("DD/MM/YYYY");n.data.busSearchReturn!=null&&(n.arrival=n.data.busSearchReturn.departList[0],n.arrival.departureDate=moment(n.arrival.departureDateTime).format("DD/MM/YYYY"));bindTemplate(n,"#printTicketTemplate",".PrintTicketContainer",!1)}function postPrintTicketByFeedAPI(n,t){$.get(busPrintTicketAPI+"/"+n).done(function(n){t(n)}).fail(function(){t(null)})}function postPassengerByFeed(n,t){postPassengerByFeedAPI(n,function(n){n!==null?(t(!0),composePassengerByFeedIfReady(n)):t(!1)})}function composePassengerByFeedIfReady(n){console.log(n)}function postPassengerByFeedAPI(n,t){$.post(busPassengerAPI,n).done(function(n){t(n)}).fail(function(n){displayErrors(n.responseJSON);t(null)})}function postBusTicket(n){postBusTicketByFeedAPI(n,function(n){composeBusTicketByFeedIfReady(n)})}function composeBusTicketByFeedIfReady(n){console.log(n);n.serviceStatus.statusCode==200?setTimeout(function(){redirect(rootHost+"passenger/"+n.id)},250):bindTemplate(n.serviceStatus,"#busSearchResultMessageTemplate",".BusSearchResultMessageContainer",!1)}function postBusTicketByFeedAPI(n,t){var i={};i["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:i,contentType:"application/json",url:busTicketAPI,data:JSON.stringify(n),success:function(n){t!==null&&t(n)},error:function(){console.log("Error postBusTicketByFeedAPI()")}})}function postBusUnLockSeat(n){postBusUnLockSeatByFeedAPI(n,function(n){composeBusSeatByFeedIfReady(n)})}function postBusUnLockSeatByFeedAPI(n,t){var i={};i["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:i,contentType:"application/json",url:busUnLockSeatAPI,data:JSON.stringify(n),success:function(n){t!==null&&t(n)},error:function(){console.log("Error postBusUnLockSeatByFeedAPI()")}})}function postBusLockSeat(n){postBusLockSeatByFeedAPI(n,function(n){composeBusSeatByFeedIfReady(n)})}function composeBusSeatByFeedIfReady(n){var i,t,r;for(seatChecks=currentPanalProvider==1?n.data.seatDepartChecks:n.data.seatReturnChecks,i=0;i<seatChecks.length;i++)for(t=0;t<n.dataList[0].seatList.length;t++)r=n.dataList[0].seatList[t],seatChecks[i].seatNumber===r.seatNumber&&(r.seatStatus=-1,n.dataList[0].seatList[t]=r);console.log(n)}function postBusLockSeatByFeedAPI(n,t){var i={};i["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:i,contentType:"application/json",url:busLockSeatAPI,data:JSON.stringify(n),success:function(n){t!==null&&t(n)},error:function(){console.log("Error postBusLockSeatByFeedAPI()")}})}function postBusSeatByFeed(n){postBusSeatByFeedAPI(n,function(n){busSeatByFeed=n;composepostBusSeatByFeedIfReady()})}function composepostBusSeatByFeedIfReady(){var n,t,i;for(currentPanalProvider==1?(busSeatByFeed.data.depart=busSeatByFeed.data.busSearch.departList[0],currentReat!=null&&$(".BusSeatMapContainer-"+currentReat).html(""),currentReat=busSeatByFeed.data.depart.id):(busSeatByFeed.data.depart=busSeatByFeed.data.busSearchReturn.departList[0],currentReatReturn!=null&&$(".BusSeatMapContainer-"+currentReatReturn).html(""),currentReatReturn=busSeatByFeed.data.depart.id),busSeatByFeed.provider=Number(currentPanalProvider),n=0;n<busSeatByFeed.data.busSeats.length;n++)for(t=0;t<busSeatByFeed.data.busSeats[n].seatList.length;t++)i=busSeatByFeed.data.busSeats[n].seatList[t],i.provider=Number(currentPanalProvider),i.id=busSeatByFeed.data.depart.id,busSeatByFeed.data.busSeats[n].seatList[t]=i;bindTemplate(busSeatByFeed,"#busSeatMapTemplate",".BusSeatMapContainer-"+busSeatByFeed.data.depart.id,!1)}function postBusSeatByFeedAPI(n,t){var i={};i["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:i,contentType:"application/json",url:busSeatAPI,data:JSON.stringify(n),success:function(n){t!==null&&t(n)},error:function(){console.log("Error postBusSeatByFeedAPI()");t(null)}})}function postBusSearchByFeed(n){postBusSearchByFeedAPI(n,function(t){busSearchByFeed=t.data;composepostBusSearchByFeedIfReady(n)})}function composepostBusSearchByFeedIfReady(){var t,i,r,n;for(busDepartTotal=[],t=0;t<busSearchByFeed.busDeparture.length;t++){for(i=busSearchByFeed.busDeparture[t],r=0;r<i.departList.length;r++)n=busSearchByFeed.busDeparture[t].departList[r],n.segmentNo===1&&(n.id=i.id),n.travelID=n.price.listPrice[0].travelID,n.accordion="depart",i.departList[r]=n;busDepartTotal.push(i)}if(busReturnTotal=[],busSearchByFeed.busReturn!==null)for(t=0;t<busSearchByFeed.busReturn.length;t++){for(i=busSearchByFeed.busReturn[t],r=0;r<i.departList.length;r++)n=busSearchByFeed.busReturn[t].departList[r],n.segmentNo===1&&(n.id=i.id),n.travelID=n.price.listPrice[0].travelID,n.accordion="return",i.departList[r]=n;busReturnTotal.push(i)}bindTemplate(busSearchByFeed,"#busSearchResultTemplate",".SearchResultsContainer",!1);bindTemplate({dataList:busDepartTotal,accordion:"depart"},"#busSearchDepartResultTemplate",".busSearchDepartResultContainer",!1);bindTemplate({dataList:busReturnTotal,accordion:"return"},"#busSearchDepartResultTemplate",".busSearchReturnResultContainer",!1);activateAdminBSB()}function postBusSearchByFeedAPI(n,t){({})["XSRF-TOKEN"]=TOKENHEADERVALUE;loadComponent(".SearchResultsContainer");$.post(busSearchAPI,n).done(function(n){t(n)}).fail(function(n){$(".SearchResultsContainer").html('<p class="search-message">not found.<\/p>');displayErrors(n.responseJSON);t(null)})}function postBusFilter(n){busProvider=n;composeBusFilterByFeedIfReady()}function composeBusFilterByFeedIfReady(){$(".SearchResultsContainer").html("");bindTemplate({provider:Number(busProvider)},"#busFilterTemplate",".BusFilterContainer",!1);postBusListBoarding(null,null);busProvider==1&&(postBusListBoardingReturn(null,null),$('input[name="departureDateReturn"]').daterangepicker({singleDatePicker:!0,showDropdowns:!1},function(){}));$('input[name="departureDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!1},function(){});activateAdminBSB()}function postBusListDropOffReturn(n,t,i,r){postBusListDropOffByFeedAPI(n,t,function(u){busListDropOffReturnByFeed=u;composeBusListDropOffReturnByFeedIfReady(n,t,i,r)})}function composeBusListDropOffReturnByFeedIfReady(n,t,i,r){t=busListDropOffReturnByFeed.dataList[0].stationList[0].provinceID;n=busListDropOffReturnByFeed.dataList[0].stationList[0].stationID;var u=busListDropOffReturnByFeed.dataList[0].stationList[0].routeList;$("#form_busFilter input[name='ToProvinceReturn']").val(t);$("#form_busFilter input[name='ToStationReturn']").val(n);$("#form_busFilter input[name='ToRouteListReturn']").val(u);$("#form_busFilter input[name='ToProvinceReturnName']").val(i);$("#form_busFilter input[name='ToStationReturnName']").val(r);bindTemplate(busListDropOffReturnByFeed,"#busListDropOffReturnTemplate",".BusListDropOffReturnContainer",!1);activateAdminBSB()}function postBusListDropOff(n,t,i,r){postBusListDropOffByFeedAPI(n,t,function(u){busListDropOffByFeed=u;composeBusListDropOffByFeedIfReady(n,t,i,r)})}function composeBusListDropOffByFeedIfReady(n,t,i,r){t=busListDropOffByFeed.dataList[0].stationList[0].provinceID;n=busListDropOffByFeed.dataList[0].stationList[0].stationID;var u=busListDropOffByFeed.dataList[0].stationList[0].routeList;$("#form_busFilter input[name='ToRouteList']").val(u);$("#form_busFilter input[name='ToProvince']").val(t);$("#form_busFilter input[name='ToStation']").val(n);$("#form_busFilter input[name='ToProvinceName']").val(i);$("#form_busFilter input[name='ToStationName']").val(r);bindTemplate(busListDropOffByFeed,"#busListDropOffTemplate",".BusListDropOffContainer",!1);activateAdminBSB()}function postBusListDropOffByFeedAPI(n,t,i){var r={};r["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:r,contentType:"application/json",url:listDropOffAPI,data:JSON.stringify({language:"th",stationID:n,provinceID:t,agent:"GB"}),success:function(n){i!==null&&i(n)},error:function(){console.log("Error postBusListDropOffByFeedAPI()")}})}function postBusListBoardingReturn(n,t,i,r){postBusListBoardingByFeedAPI(function(u){busListBoardingReturnByFeed=u;composeBusListBoardingReturnByFeedIfReady(n,t,i,r)})}function composeBusListBoardingReturnByFeedIfReady(n,t,i,r){var s,f,e,o,u;for((setUndefined(n)==undefined||setUndefined(t)==undefined)&&(n=busListBoardingReturnByFeed.dataList[0].stationList[0].provinceID,t=busListBoardingReturnByFeed.dataList[0].stationList[0].stationID,i=busListBoardingReturnByFeed.dataList[0].stationList[0].provinceName,r=busListBoardingReturnByFeed.dataList[0].stationList[0].stationName),$("#form_busFilter input[name='FromProvinceReturn']").val(n),$("#form_busFilter input[name='FromStationReturn']").val(t),$("#form_busFilter input[name='FromProvinceReturnName']").val(i),$("#form_busFilter input[name='FromStationReturnName']").val(r),s=!1,f=0;f<busListBoardingReturnByFeed.dataList.length;f++){for(e=busListBoardingReturnByFeed.dataList[f],o=0;o<e.stationList.length;o++)u=e.stationList[o],u.provinceID==n&&u.stationID==t?s==!1&&(u.isSelected=!0,s=!0):u.isSelected=!1,e.stationList[o]=u;busListBoardingReturnByFeed.dataList[f]=e}bindTemplate(busListBoardingReturnByFeed,"#busListBoardingReturnTemplate",".BusListBoardingReturnContainer",!1);postBusListDropOffReturn(t,n,i,r);activateAdminBSB()}function postBusListBoarding(n,t,i,r){postBusListBoardingByFeedAPI(function(u){busListBoardingByFeed=u;composeBusListBoardingByFeedIfReady(n,t,i,r)})}function composeBusListBoardingByFeedIfReady(n,t,i,r){var s,f,e,o,u;for((setUndefined(n)==undefined||setUndefined(t)==undefined)&&(n=busListBoardingByFeed.dataList[0].stationList[0].provinceID,t=busListBoardingByFeed.dataList[0].stationList[0].stationID,i=busListBoardingByFeed.dataList[0].stationList[0].provinceName,r=busListBoardingByFeed.dataList[0].stationList[0].stationName),console.log(busListBoardingByFeed),$("#form_busFilter input[name='FromProvince']").val(n),$("#form_busFilter input[name='FromStation']").val(t),$("#form_busFilter input[name='FromProvinceName']").val(i),$("#form_busFilter input[name='FromStationName']").val(r),s=!1,f=0;f<busListBoardingByFeed.dataList.length;f++){for(e=busListBoardingByFeed.dataList[f],o=0;o<e.stationList.length;o++)u=e.stationList[o],u.provinceID==n&&u.stationID==t?s==!1&&(u.isSelected=!0,s=!0):u.isSelected=!1,e.stationList[o]=u;busListBoardingByFeed.dataList[f]=e}bindTemplate(busListBoardingByFeed,"#busListBoardingTemplate",".BusListBoardingContainer",!1);postBusListDropOff(t,n,i,r);activateAdminBSB()}function postBusListBoardingByFeedAPI(n){var t={};t["XSRF-TOKEN"]=TOKENHEADERVALUE;$.ajax({type:"post","async":!0,datatype:"json",headers:t,contentType:"application/json",url:listBoardingAPI,data:JSON.stringify({language:"th"}),success:function(t){n!==null&&n(t)},error:function(){console.log("Error postBusListBoardingByFeedAPI()")}})}var $searchBar;if(typeof jQuery=="undefined")throw new Error("jQuery plugins need to be before this file");$.AdminBSB={};$.AdminBSB.options={colors:{red:"#F44336",pink:"#E91E63",purple:"#9C27B0",deepPurple:"#673AB7",indigo:"#3F51B5",blue:"#2196F3",lightBlue:"#03A9F4",cyan:"#00BCD4",teal:"#009688",green:"#4CAF50",lightGreen:"#8BC34A",lime:"#CDDC39",yellow:"#ffe821",amber:"#FFC107",orange:"#FF9800",deepOrange:"#FF5722",brown:"#795548",grey:"#9E9E9E",blueGrey:"#607D8B",black:"#000000",white:"#ffffff"},leftSideBar:{scrollColor:"rgba(0,0,0,0.5)",scrollWidth:"4px",scrollAlwaysVisible:!1,scrollBorderRadius:"0",scrollRailBorderRadius:"0",scrollActiveItemWhenPageLoad:!0,breakpointWidth:1170},dropdownMenu:{effectIn:"fadeIn",effectOut:"fadeOut"}};$.AdminBSB.leftSideBar={activate:function(){var n=this,t=$("body"),i=$(".overlay");$(window).click(function(r){var u=$(r.target);r.target.nodeName.toLowerCase()==="i"&&(u=$(r.target).parent());!u.hasClass("bars")&&n.isOpen()&&u.parents("#leftsidebar").length===0&&(u.hasClass("js-right-sidebar")||u.hasClass("navbar-toggle")||i.fadeOut(),t.removeClass("overlay-open"))});$.each($(".menu-toggle.toggled"),function(n,t){$(t).next().slideToggle(0)});$.each($(".menu .list li.active"),function(n,t){var i=$(t).find("a:eq(0)");i.addClass("toggled");i.next().show()});$(".menu-toggle").on("click",function(n){var t=$(this),r=t.next(),i;$(t.parents("ul")[0]).hasClass("list")&&(i=$(n.target).hasClass("menu-toggle")?n.target:$(n.target).parents(".menu-toggle"),$.each($(".menu-toggle.toggled").not(i).next(),function(n,t){$(t).is(":visible")&&($(t).prev().toggleClass("toggled"),$(t).slideUp())}));t.toggleClass("toggled");r.slideToggle(320)});n.setMenuHeight(!0);n.checkStatusForResize(!0);$(window).resize(function(){n.setMenuHeight(!1);n.checkStatusForResize(!1)})},setMenuHeight:function(){},checkStatusForResize:function(n){var t=$("body"),i=$(".navbar .navbar-header .bars"),r=t.width();n&&t.find(".content, .sidebar").addClass("no-animate").delay(1e3).queue(function(){$(this).removeClass("no-animate").dequeue()});r<$.AdminBSB.options.leftSideBar.breakpointWidth?(t.addClass("ls-closed"),i.fadeIn()):(t.removeClass("ls-closed"),i.fadeOut())},isOpen:function(){return $("body").hasClass("overlay-open")}};$.AdminBSB.rightSideBar={activate:function(){var t=this,i=$("#rightsidebar"),n=$(".overlay");$(window).click(function(r){var u=$(r.target);r.target.nodeName.toLowerCase()==="i"&&(u=$(r.target).parent());!u.hasClass("js-right-sidebar")&&t.isOpen()&&u.parents("#rightsidebar").length===0&&(u.hasClass("bars")||n.fadeOut(),i.removeClass("open"))});$(".js-right-sidebar").on("click",function(){i.toggleClass("open");t.isOpen()?n.fadeIn():n.fadeOut()})},isOpen:function(){return $(".right-sidebar").hasClass("open")}};$searchBar=$(".search-bar");$.AdminBSB.search={activate:function(){var n=this;$(".js-search").on("click",function(){n.showSearchBar()});$searchBar.find(".close-search").on("click",function(){n.hideSearchBar()});$searchBar.find('input[type="text"]').on("keyup",function(t){t.keyCode==27&&n.hideSearchBar()})},showSearchBar:function(){$searchBar.addClass("open");$searchBar.find('input[type="text"]').focus()},hideSearchBar:function(){$searchBar.removeClass("open");$searchBar.find('input[type="text"]').val("")}};$.AdminBSB.navbar={activate:function(){var t=this,i=$("body"),n=$(".overlay"),r=$("#navbar-collapse");$(".bars").on("click",function(){i.toggleClass("overlay-open");i.hasClass("overlay-open")?(r.removeClass("in"),n.fadeIn()):n.fadeOut()});$(".navbar-toggle").on("click",function(){t.isOpen()?n.fadeOut():n.fadeIn()});$(window).click(function(i){var u=$(i.target);t.isOpen()&&!u.hasClass("navbar-collapse")&&(n.fadeOut(),r.removeClass("in"))});$('.nav [data-close="true"]').on("click",function(){var t=$(".navbar-toggle").is(":visible"),n=$(".navbar-collapse");t&&n.slideUp(function(){n.removeClass("in").removeAttr("style")})})},isOpen:function(){return $(".navbar-collapse").hasClass("in")}};$.AdminBSB.input={activate:function(){}};$.AdminBSB.select={activate:function(){$.fn.selectpicker&&$("select:not(.ms)").selectpicker()}};$.AdminBSB.dropdownMenu={activate:function(){var n=this;$(".dropdown, .dropup, .btn-group").on({"show.bs.dropdown":function(){var t=n.dropdownEffect(this);n.dropdownEffectStart(t,t.effectIn)},"shown.bs.dropdown":function(){var t=n.dropdownEffect(this);t.effectIn&&t.effectOut&&n.dropdownEffectEnd(t,function(){})},"hide.bs.dropdown":function(t){var i=n.dropdownEffect(this);i.effectOut&&(t.preventDefault(),n.dropdownEffectStart(i,i.effectOut),n.dropdownEffectEnd(i,function(){i.dropdown.removeClass("open")}))}});Waves.attach(".dropdown-menu li a",["waves-block"]);Waves.init()},dropdownEffect:function(n){var u=$.AdminBSB.options.dropdownMenu.effectIn,f=$.AdminBSB.options.dropdownMenu.effectOut,t=$(n),e=$(".dropdown-menu",n),i,r;return t.length>0&&(i=t.data("effect-in"),r=t.data("effect-out"),i!==undefined&&(u=i),r!==undefined&&(f=r)),{target:n,dropdown:t,dropdownMenu:e,effectIn:u,effectOut:f}},dropdownEffectStart:function(n,t){t&&(n.dropdown.addClass("dropdown-animating"),n.dropdownMenu.addClass("animated dropdown-animated"),n.dropdownMenu.addClass(t))},dropdownEffectEnd:function(n,t){n.dropdown.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.dropdown.removeClass("dropdown-animating");n.dropdownMenu.removeClass("animated dropdown-animated");n.dropdownMenu.removeClass(n.effectIn);n.dropdownMenu.removeClass(n.effectOut);typeof t=="function"&&t()})}};var edge="Microsoft Edge",ie10="Internet Explorer 10",ie11="Internet Explorer 11",opera="Opera",firefox="Mozilla Firefox",chrome="Google Chrome",safari="Safari";$.AdminBSB.browser={activate:function(){var n=this,t=n.getClassName();t!==""&&$("html").addClass(n.getClassName())},getBrowser:function(){var n=navigator.userAgent.toLowerCase();return/edge/i.test(n)?edge:/rv:11/i.test(n)?ie11:/msie 10/i.test(n)?ie10:/opr/i.test(n)?opera:/chrome/i.test(n)?chrome:/firefox/i.test(n)?firefox:!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)?undefined:safari},getClassName:function(){var n=this.getBrowser();return n===edge?"edge":n===ie11?"ie11":n===ie10?"ie10":n===opera?"opera":n===chrome?"chrome":n===firefox?"firefox":n===safari?"safari":""}};$(function(){$.AdminBSB.browser.activate();$.AdminBSB.navbar.activate();$.AdminBSB.dropdownMenu.activate();$.AdminBSB.input.activate();$.AdminBSB.select.activate();$.AdminBSB.search.activate();$.AdminBSB.leftSideBar.activate();$.AdminBSB.rightSideBar.activate();setTimeout(function(){$(".page-loader-wrapper").fadeOut()},50)});var TOKENHEADERVALUE=$("input[name='RequestVerificationToken']").val(),isLocal=!1,devLocalRoot="https://localhost:44360/",prodLocalRoot="https://fairfair-b2b-uat.azurewebsites.net/",rootHost=devLocalRoot;isLocal===!1&&(rootHost=prodLocalRoot);var busSeatAPI=rootHost+"bus/seatmap",listBoardingAPI=rootHost+"bus/listBoarding",busSearchAPI=rootHost+"bus/search",listDropOffAPI=rootHost+"bus/listDropoff",busLockSeatAPI=rootHost+"bus/lockseat",busUnLockSeatAPI=rootHost+"bus/unlockseat",busPassengerAPI=rootHost+"passenger/create",busTicketAPI=rootHost+"ticket/create",busPrintTicketAPI=rootHost+"ticket/print",busTicketSearchAPI=rootHost+"ticket/search";currentReat=null;currentReatReturn=null;currentPanalProvider=1;var seatChecks=[],$l=$('<div class="m-t-10"><div class="preloader pl-size-xs"><div class="spinner-layer pl-teal"><div class="circle-clipper left"><div class="circle"><\/div><\/div><div class="circle-clipper right"><div class="circle"><\/div><\/div><\/div><\/div><\/div>'),$d=$('<div class="row text-center"><div>'),$delay=330,deleteButton="ยืนยันลบข้อมูล",deleteMessage="แน่ใจไหมว่าต้องการลบข้อมูลนี้<br>หมายเหตุ: ไม่สามารถย้อนกลับ",deleteTitle="ลบข้อมูล",closeButton="ยกเลิก",saveButton="บันทึก";$(document).ready(function(){$(document).on("changed.bs.select","select#listBoarding",function(n){addListBoarding(this,n)});$(document).on("changed.bs.select","select#listBoardingReturn",function(n){addListBoardingReturn(this,n)});$(document).on("changed.bs.select","select#listDropOff",function(n){addListDropOff(this,n)});$(document).on("changed.bs.select","select#listDropOffReturn",function(n){addListDropOffReturn(this,n)});$(document).on("click change",'.triptype input[type="radio"]',function(n){addTripType(this,n)});$(document).on("click","a.aBusFilter",function(n){addBusFilter(this,n,"#form_busFilter")});$(document).on("#tabDeparture shown.bs.collapse","#tabDeparture .panel-collapse",function(n){addBusSeatMap(this,n)});$(document).on("#tabReturn shown.bs.collapse","#tabReturn .panel-collapse",function(n){addBusReturnSeatMap(this,n)});$(document).on("click","input.aBusSeat",function(n){addBusSeat(this,n,"")});$(document).on("click","a.aPanalDeparture",function(n){addPanalDeparture(this,n)});$(document).on("click","a.aBusTicket",function(n){addBusTicket(this,n)});$(document).on("click","a.aBusPassenger",function(n){addBusPassenger(this,n,"#form_busPassenger")});$(document).on("click","a.aPrintTicket",function(n){addPrintTicket(this,n)});$(document).on("click","a.aBusFilterTicket",function(n){addBusFilterTicket(this,n,"#form_ticketFilter")});$(document).on("click","a.aBusCancleTicket",function(n){addBusCancleTicket(this,n)})});var $y=$(window).height()/8,$h=150,$w=800;(function(){function i(n){var t={passive:!1,capture:!1};EventTarget.prototype.addEventListener=function(i,r,u){var f=typeof u=="object",e=f?u.capture:u;u=f?u:{};u.passive=u.passive!==undefined?u.passive:t.passive;u.capture=e!==undefined?e:t.capture;n.call(this,i,r,u)}}function r(){var n=!1,t;try{t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("touchstart",null,t)}catch(i){}return n}var t=r(),n;t&&(n=EventTarget.prototype.addEventListener,i(n))})();